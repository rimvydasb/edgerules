<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/doc/TODO.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/doc/TODO.md" />
              <option name="originalContent" value="# Actionable TODO List&#10;&#10;## Critical&#10;&#10;Refactor UserFunctionRef: Implement UserFunctionRef handling in EObjectContent::link and BrowseResultFound::eval (currently panics with todo!).&#10;Remove UndefinedType: Ensure ValueType::UndefinedType never exists in runtime execution to prevent undefined behavior.&#10;Fix Loop Linking: Fix link_parts in ForFunction to handle return expressions referring to list item fields correctly.&#10;Prevent Infinite Loops: Ensure infinite loops do not occur in ASTBuilder::finalize.&#10;Important&#10;Split OtherLinkingError: Refactor LinkingErrorEnum::OtherLinkingError into specific error variants.&#10;Refactor ValueEnum: Replace NumberEnum::SV with ValueOrSv in ValueEnum for better type safety.&#10;Define Range Semantics: Clarify and implement inclusive/exclusive and infinity/static semantics for ValueEnum::RangeValue.&#10;Support Nested Arrays: Implement support for nested arrays in ArrayValue.&#10;Fix TypeValue: Update ValueEnum::get_type to return the specific TypeValue as a type.&#10;Implement Fractions: Implement Fraction(numerator, denominator) in NumberEnum.&#10;Linking Error in Loops: Change the runtime error when iterating through a non-list type to a linking error.&#10;Enforce Static Linking: Ensure static linking is fully completed in the link phase for VariableLink.&#10;Improve Variable Error: Return LinkingErrorEnum::FieldNotFound instead of UndefinedType for unlinked variables.&#10;Clarify StaticObject: Determine if StaticObject needs separate linking or if it's the caller's responsibility.&#10;Enforce Homogeneous Lists: Throw a linking error if a collection contains elements of different types.&#10;Aggregate Types: Implement type aggregation for collections containing multiple objects with different structures.&#10;Prevent Duplicates: Add a check to prevent adding duplicate fields in ContextObjectBuilder.&#10;Propagate Errors: Return and propagate errors when adding expressions in ContextObjectBuilder.&#10;Check Equality Types: Update ContextObject::eq to evaluate types as well.&#10;Review Context Mutability: Clarify why object in ExecutionContext is mutable or make it immutable.&#10;Remove Runtime LinkingError: Ensure LinkingError is not returned in execution context methods.&#10;Optimize AST Cloning: Find a cheaper way to clone the AST tree in to_runtime_snapshot.&#10;Preserve Links: Preserve already set links to speed up the next linking in to_runtime_snapshot.&#10;Fix context_unwrap: Replace the hack in context_unwrap with a proper solution.&#10;Fix Tokenizer Errors: Accumulate errors properly in ASTBuilder instead of pushing them back.&#10;Check Context Level: Check level before adding in build_context and build_sequence.&#10;Clarify Operator Logic: Clarify the logic in build_any_operator for unparsed left sides.&#10;Count Brackets: Implement brackets counting and error returning in tokenize.&#10;Implement Range Parsing: Implement range parsing logic in tokenize.&#10;Resolve Deep Nesting: Resolve deep nesting linking errors in tests.&#10;Unreserve type: Make type not reserved based on context.&#10;Fix Casting: Throw exception for invalid type casting instead of allowing it.&#10;Implement Flatten: Implement flatten for lists.&#10;CLI Tests: Add integration test harness for crates/cli.&#10;Deprecate evaluate_method: Remove evaluate_method from WASM API.&#10;Decision Service Tests: Add nested path tests for decision service model updates.&#10;Special Value Literals: Add support for literals for special values.&#10;Duration Literals: Add support for literal durations.&#10;Optional&#10;Refactor Primitives: Move primitive values into a PrimitiveValue enum.&#10;Revisit RangeValue: Evaluate if RangeValue should be a value or strictly a filter method.&#10;Refactor TypeValue: Rethink ValueEnum::TypeValue design.&#10;Verify RefCell: Investigate if RefCell is necessary for ValueType::ObjectType.&#10;Remove RangeType Display: Remove the RangeType display implementation.&#10;Optimize iterate_range: Simplify the iterate_range implementation.&#10;Verify Priorities: Verify if the priority 17 for FilterArray is correct.&#10;Implement Display: Implement Display trait for EUnparsedToken.&#10;Remove RefCell: Attempt to remove RefCell from ExpressionEnum::StaticObject.&#10;Move ObjectField: Move ObjectField to EUnparsedToken.&#10;Lazy Evaluation: Consider lazy evaluation for CollectionExpression.&#10;Optimize Insertion: Optimize ContextObjectBuilder field insertion.&#10;Review Rc: Review Rc usage reference.&#10;Prevent Re-execution: Investigate preventing re-execution in link_parts.&#10;Debug Display: Trace calls to &quot;OrphanedChild&quot; path in NodeDataEnum::fmt.&#10;Verify Internal Node: Run tests with coverage for Internal node path.&#10;Deprecate push_element: Deprecate ASTBuilder::push_element.&#10;Move Operators: Move math operator handling to ASTBuilder.&#10;Simplify Comparators: Simplify comparator operator acquisition.&#10;Improve Error Location: Improve error location reporting in tests.&#10;Support Origin Override: Implement ability to override Special Value origin.&#10;More Date/Time Functions: Add support for more date/time functions.&#10;TODOs Needing Clarification&#10;crates/core/src/typesystem/errors.rs: &quot;this is absolutely unclear how it happens in runtime, because linking solves types.&quot; (TypeNotSupported)&#10;Ambiguity: Unclear under what circumstances this runtime error can occur if static linking is correct.&#10;crates/core/src/typesystem/values.rs: &quot;the type is provided using this value, but this is kind of not a value - need to rethink this&quot; (TypeValue)&#10;Ambiguity: The role of TypeValue as a value vs. a type definition is ambiguous.&#10;crates/core/src/tokenizer/builder.rs: &quot;that's absolutely not clear&quot; (build_any_operator)&#10;Ambiguity: Refers to the handling of Unparsed left tokens in operator building; the logic needs explanation.&#10;crates/core/src/ast/token.rs: &quot;is it really OK?&quot; (FilterArray priority)&#10;Ambiguity: Questions the correctness of the hardcoded priority value 17.&#10;High-Risk TODOs&#10;crates/core/src/typesystem/types.rs: ValueType::UndefinedType must not exist in runtime. If it does, it indicates a critical failure in the linking phase.&#10;crates/core/src/ast/context/context_object_type.rs: todo!(&quot;UserFunctionRef&quot;) will cause a panic if UserFunctionRef is encountered during linking or evaluation.&#10;crates/core/src/tokenizer/builder.rs: finalize needs to ensure no infinite loops occur, which could hang the parser.&#10;crates/core/src/ast/foreach.rs: link_parts failing with unknown field for list items is a bug that affects the core functionality of loops over objects." />
              <option name="updatedContent" value="# Actionable TODO List&#10;&#10;## Critical&#10;&#10;- Refactor `UserFunctionRef`: Implement `UserFunctionRef` handling in `EObjectContent::link` and `BrowseResultFound::eval` (currently panics with `todo!`).&#10;- Remove `UndefinedType`: Ensure `ValueType::UndefinedType` never exists in runtime execution to prevent undefined behavior.&#10;- Fix Loop Linking: Fix `link_parts` in `ForFunction` to handle return expressions referring to list item fields correctly.&#10;- Prevent Infinite Loops: Ensure infinite loops do not occur in `ASTBuilder::finalize`.&#10;&#10;## Important&#10;&#10;- Split `OtherLinkingError`: Refactor `LinkingErrorEnum::OtherLinkingError` into specific error variants.&#10;- Refactor `ValueEnum`: Replace `NumberEnum::SV` with `ValueOrSv` in `ValueEnum` for better type safety.&#10;- Define Range Semantics: Clarify and implement inclusive/exclusive and infinity/static semantics for `ValueEnum::RangeValue`.&#10;- Support Nested Arrays: Implement support for nested arrays in `ArrayValue`.&#10;- Fix `TypeValue`: Update `ValueEnum::get_type` to return the specific `TypeValue` as a type.&#10;- Implement Fractions: Implement `Fraction(numerator, denominator)` in `NumberEnum`.&#10;- Linking Error in Loops: Change the runtime error when iterating through a non-list type to a linking error.&#10;- Enforce Static Linking: Ensure static linking is fully completed in the link phase for `VariableLink`.&#10;- Improve Variable Error: Return `LinkingErrorEnum::FieldNotFound` instead of `UndefinedType` for unlinked variables.&#10;- Clarify `StaticObject`: Determine if `StaticObject` needs separate linking or if it's the caller's responsibility.&#10;- Enforce Homogeneous Lists: Throw a linking error if a collection contains elements of different types.&#10;- Aggregate Types: Implement type aggregation for collections containing multiple objects with different structures.&#10;- Prevent Duplicates: Add a check to prevent adding duplicate fields in `ContextObjectBuilder`.&#10;- Propagate Errors: Return and propagate errors when adding expressions in `ContextObjectBuilder`.&#10;- Check Equality Types: Update `ContextObject::eq` to evaluate types as well.&#10;- Review Context Mutability: Clarify why object in `ExecutionContext` is mutable or make it immutable.&#10;- Remove Runtime `LinkingError`: Ensure `LinkingError` is not returned in execution context methods.&#10;- Optimize AST Cloning: Find a cheaper way to clone the AST tree in `to_runtime_snapshot`.&#10;- Preserve Links: Preserve already set links to speed up the next linking in `to_runtime_snapshot`.&#10;- Fix `context_unwrap`: Replace the hack in `context_unwrap` with a proper solution.&#10;- Fix Tokenizer Errors: Accumulate errors properly in `ASTBuilder` instead of pushing them back.&#10;- Check Context Level: Check level before adding in `build_context` and `build_sequence`.&#10;- Clarify Operator Logic: Clarify the logic in `build_any_operator` for unparsed left sides.&#10;- Count Brackets: Implement brackets counting and error returning in `tokenize`.&#10;- Implement Range Parsing: Implement range parsing logic in `tokenize`.&#10;- Resolve Deep Nesting: Resolve deep nesting linking errors in tests.&#10;- Unreserve type: Make type not reserved based on context.&#10;- Fix Casting: Throw exception for invalid type casting instead of allowing it.&#10;- Implement Flatten: Implement `flatten` for lists.&#10;- CLI Tests: Add integration test harness for `crates/cli`.&#10;- Deprecate `evaluate_method`: Remove `evaluate_method` from WASM API.&#10;- Decision Service Tests: Add nested path tests for decision service model updates.&#10;- Special Value Literals: Add support for literals for special values.&#10;- Duration Literals: Add support for literal durations.&#10;&#10;## Optional&#10;&#10;- Refactor Primitives: Move primitive values into a `PrimitiveValue` enum.&#10;- Revisit `RangeValue`: Evaluate if `RangeValue` should be a value or strictly a filter method.&#10;- Refactor `TypeValue`: Rethink `ValueEnum::TypeValue` design.&#10;- Verify `RefCell`: Investigate if `RefCell` is necessary for `ValueType::ObjectType`.&#10;- Remove `RangeType` Display: Remove the `RangeType` display implementation.&#10;- Optimize `iterate_range`: Simplify the `iterate_range` implementation.&#10;- Verify Priorities: Verify if the priority `17` for `FilterArray` is correct.&#10;- Implement `Display`: Implement `Display` trait for `EUnparsedToken`.&#10;- Remove `RefCell`: Attempt to remove `RefCell` from `ExpressionEnum::StaticObject`.&#10;- Move `ObjectField`: Move `ObjectField` to `EUnparsedToken`.&#10;- Lazy Evaluation: Consider lazy evaluation for `CollectionExpression`.&#10;- Optimize Insertion: Optimize `ContextObjectBuilder` field insertion.&#10;- Review `Rc`: Review `Rc` usage reference.&#10;- Prevent Re-execution: Investigate preventing re-execution in `link_parts`.&#10;- Debug Display: Trace calls to &quot;OrphanedChild&quot; path in `NodeDataEnum::fmt`.&#10;- Verify Internal Node: Run tests with coverage for Internal node path.&#10;- Deprecate `push_element`: Deprecate `ASTBuilder::push_element`.&#10;- Move Operators: Move math operator handling to `ASTBuilder`.&#10;- Simplify Comparators: Simplify comparator operator acquisition.&#10;- Improve Error Location: Improve error location reporting in tests.&#10;- Support Origin Override: Implement ability to override Special Value origin.&#10;- More Date/Time Functions: Add support for more date/time functions.&#10;&#10;## TODOs Needing Clarification&#10;&#10;- `crates/core/src/typesystem/errors.rs`: &quot;this is absolutely unclear how it happens in runtime, because linking solves types.&quot; (TypeNotSupported)&#10;- Ambiguity: The role of `TypeValue` as a value vs. a type definition is ambiguous (`crates/core/src/typesystem/values.rs`).&#10;- `crates/core/src/tokenizer/builder.rs`: Clarify logic in `build_any_operator` (handling of unparsed left tokens).&#10;- `crates/core/src/ast/token.rs`: Question correctness of hardcoded priority value `17` for `FilterArray`.&#10;&#10;## High-Risk TODOs&#10;&#10;- `crates/core/src/typesystem/types.rs`: `ValueType::UndefinedType` must not exist in runtime; if it does, it's a critical failure in the linking phase.&#10;- `crates/core/src/ast/context/context_object_type.rs`: `todo!(&quot;UserFunctionRef&quot;)` will cause a panic if encountered during linking or evaluation.&#10;- `crates/core/src/tokenizer/builder.rs`: `finalize` must ensure no infinite loops occur to avoid hanging the parser.&#10;- `crates/core/src/ast/foreach.rs`: `link_parts` failing with unknown field for list items is a core bug for loops over objects." />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>